# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å FFmpeg

## –ü—Ä–æ–±–ª–µ–º–∞

YouTube –∫–æ–º–∞–Ω–¥–∞ —Å–∫–∞—á–∏–≤–∞–ª–∞ –≤–∏–¥–µ–æ, –Ω–æ –Ω–µ –º–æ–≥–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ MP3 –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è FFmpeg:

```
ERROR: Postprocessing: ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location
```

## –ê–Ω–∞–ª–∏–∑

–ò–∑ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ —Å—Ç–∞–ª–æ —è—Å–Ω–æ:

1. **‚úÖ yt-dlp —Ä–∞–±–æ—Ç–∞–µ—Ç** - –≤–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
2. **‚úÖ –ê–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** - yt-dlp —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
3. **‚ùå FFmpeg –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** - yt-dlp –Ω–µ –º–æ–∂–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å WebM –≤ MP3

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

**–ë—ã–ª–æ:**
```java
ProcessBuilder pb = new ProcessBuilder(
    ytDlpPath,
    "--extract-audio",
    "--audio-format", "mp3",
    "--audio-quality", "128K",
    "--max-filesize", "50M",
    "--no-playlist",
    "--output", outputFile.toString(),
    youtubeUrl
);
```

**–°—Ç–∞–ª–æ:**
```java
ProcessBuilder pb = new ProcessBuilder(
    ytDlpPath,
    "--format", "bestaudio[ext=m4a]/bestaudio[ext=webm]/bestaudio",
    "--max-filesize", "50M",
    "--no-playlist",
    "--output", outputFile.toString(),
    youtubeUrl
);
```

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤

–¢–µ–ø–µ—Ä—å –º–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ –∞—É–¥–∏–æ —Ñ–æ—Ä–º–∞—Ç—ã:
- MP3 (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- M4A (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π)
- WebM (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
- OGG, AAC, Opus (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ)

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ FFmpeg

```java
if (errorMsg.contains("ffprobe and ffmpeg not found")) {
    player.sendMessage(Text.literal("¬ße–í–∏–¥–µ–æ —Å–∫–∞—á–∞–Ω–æ, –Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ MP3"), false);
    player.sendMessage(Text.literal("¬ß7–ü–æ–ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç..."), false);
    // Continue to check for downloaded files anyway
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç FFmpeg
- –°–∫–∞—á–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –ò–∑–±–µ–≥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
- –†–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"

### ‚úÖ –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª—É—á—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –∞—É–¥–∏–æ —Ñ–æ—Ä–º–∞—Ç
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç M4A (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä)
- Fallback –Ω–∞ WebM –µ—Å–ª–∏ M4A –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### ‚úÖ –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ú–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞
- –ë—ã—Å—Ç—Ä–µ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

1. **M4A** - –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ö–æ—Ä–æ—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
2. **WebM** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π (—Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —à–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
3. **MP3** - –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
4. **OGG, AAC, Opus** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å YouTube –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–æ–±–ª–µ–º:

```
/audiodisc youtube https://youtu.be/VIDEO_ID
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
¬ßa–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ —Å YouTube...
¬ß7URL: https://youtu.be/VIDEO_ID
¬ß7–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ...
¬ßa–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –†–∞–∑–º–µ—Ä: X.X MB
¬ß7–§–∞–π–ª: VIDEO_ID.m4a
```

## –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** - —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –≤–∏–¥–µ–æ** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–µ–æ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - —É–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MP3, –º–æ–∂–Ω–æ:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å FFmpeg —Å–∏—Å—Ç–µ–º–Ω–æ** (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏** —Å `/audiodisc upload <url>`
3. **–ü—Ä–∏–Ω–∏–º–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–¢–µ–ø–µ—Ä—å YouTube —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π! üéµ