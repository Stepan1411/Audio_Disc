# üéâ –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ YouTube —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ FFmpeg
**–ë—ã–ª–æ:** yt-dlp –Ω–µ –º–æ–≥ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å WebM –≤ MP3 –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è FFmpeg
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (M4A/WebM)

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 2: –§–∞–π–ª –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–¥–∞
**–ë—ã–ª–æ:** –ê—É–¥–∏–æ —Å–∫–∞—á–∏–≤–∞–ª–æ—Å—å, –Ω–æ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å —Å —Å–∏—Å—Ç–µ–º–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–∞
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏–ª–∏ –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å AudioStorageManager –∏ NbtUtils

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ yt-dlp
**–ë—ã–ª–æ:** –¢—Ä–µ–±–æ–≤–∞–ª–∞—Å—å —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ yt-dlp
**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞

## –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
```
[15:43:38] [main/INFO]: ‚úÖ yt-dlp is already available at: A:\_TEST_SERVER_1.21.8\audiodisc\yt-dlp\yt-dlp.exe
[15:43:38] [main/INFO]: üéµ YouTube functionality is ready!
[15:43:38] [main/INFO]: üì¶ Installation size: 17,5 MB
```

### üéµ –£—Å–ø–µ—à–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ YouTube –∞—É–¥–∏–æ
```
[15:44:43] [ForkJoinPool.commonPool-worker-1/INFO]: yt-dlp process finished with exit code: 0
[download] 100% of 4.75MiB in 00:00:00 at 7.99MiB/s
[15:44:43] [ForkJoinPool.commonPool-worker-1/INFO]: Found downloaded file: Mav56v7kvTk.m4a
```

### üíæ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–¥–∞
- –ê—É–¥–∏–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ AudioStorageManager
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ NBT –¥–∏—Å–∫–∞
- –î–∏—Å–∫ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –∞—É–¥–∏–æ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è yt-dlp
```java
ProcessBuilder pb = new ProcessBuilder(
    ytDlpPath,
    "--format", "bestaudio[ext=m4a]/bestaudio[ext=webm]/bestaudio",
    "--max-filesize", "50M",
    "--no-playlist",
    "--output", outputFile.toString(),
    youtubeUrl
);
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è
```java
// Create metadata
AudioMetadata metadata = new AudioMetadata(
    format,
    0L, // duration
    128000, // bitrate
    44100, // sample rate
    title
);

// Store audio
String audioId = storageManager.storeAudio(audioData, metadata, player.getName().getString());

// Apply to disc using NbtUtils
NbtUtils.attachAudioToItem(disc, audioId, player.getName().getString(), System.currentTimeMillis(), metadata);
NbtUtils.setCustomTitle(disc, "¬ß6‚ô™ " + metadata.title());
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
1. **M4A** - –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ö–æ—Ä–æ—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
2. **WebM** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π (—Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
3. **MP3, OGG, AAC, Opus** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
```
/audiodisc youtube https://youtu.be/VIDEO_ID
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```
¬ßa–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ —Å YouTube...
¬ß7URL: https://youtu.be/VIDEO_ID
¬ß7–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ...
¬ßa–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –†–∞–∑–º–µ—Ä: 4.75 MB
¬ß7–§–∞–π–ª: VIDEO_ID.m4a
¬ßa‚úÖ –ê—É–¥–∏–æ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–∞ –¥–∏—Å–∫!
¬ß7ID: 52a51f3f-66f2-4e9e-8285-f9cc41479dcc
¬ß7–ù–∞–∑–≤–∞–Ω–∏–µ: YouTube Audio VIDEO_ID
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –¥–∏—Å–∫–æ–º
- –î–∏—Å–∫ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `¬ß6‚ô™ YouTube Audio VIDEO_ID`
- –í NBT –¥–∏—Å–∫–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –ê—É–¥–∏–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–¥–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
- –î–∏—Å–∫ –≥–æ—Ç–æ–≤ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –≤ jukebox

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ FFmpeg
- –ù–µ –Ω—É–∂–Ω–∞ —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ yt-dlp
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞

### ‚úÖ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∞—É–¥–∏–æ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª—É—á—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç M4A (AAC –∫–æ–¥–µ–∫)
- Fallback –Ω–∞ WebM –µ—Å–ª–∏ M4A –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥–æ–º
- –ê—É–¥–∏–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–¥–∞
- –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–∞ (Voice Chat, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.)

### ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `AudioDiscCommand.java` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ YouTube –∫–æ–º–∞–Ω–¥–∞
- `YtDlpManager.java` - –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- `Audio_disc.java` - –∞–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
- `NbtUtils.java` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å NBT

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `AUTO_YTDLP.md` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ yt-dlp
- `FFMPEG_FIX.md` - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å FFmpeg
- `YOUTUBE_DEBUG_FIX.md` - —É–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å YouTube —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** - yt-dlp —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–í–æ–∑—å–º–∏—Ç–µ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –¥–∏—Å–∫** –≤ —Ä—É–∫—É
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É** `/audiodisc youtube <URL>`
4. **–ü–æ—Å—Ç–∞–≤—å—Ç–µ –¥–∏—Å–∫ –≤ jukebox** - –∞—É–¥–∏–æ –¥–æ–ª–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è

YouTube —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏! üéµ